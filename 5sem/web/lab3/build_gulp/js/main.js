var users;async function get_user_list(){var e=await fetch("/main",{method:"GET"});users=await e.json();for(let e=0;e<users.length;e++){var t=users[e],t="<tr><td><input type='checkbox' class='user_checkbox' name='user_checkbox' id='user_checkbox"+t.id+"'></td><td><img style='width:10vw; height: 10vh;' src='/public/images/"+t.photo+"'></td><td>"+t.name+"</td><td>"+t.mail+"</td><td>"+t.birth+"</td><td>"+t.status+"</td><td>"+t.role+"</td></tr>";$("#user_table").append($(t))}}function selected_user(){var t=$(".user_checkbox");for(let e=0;e<t.length;e++)if(t[e].checked)return e;return-1}function open_edit(){var e=selected_user();-1==e?alert("Can`t edit. Please, choose user"):($("#name_textbox").prop("value",users[e].name),$("#date_textbox").datepicker("setDate",users[e].birth),$("#email_textbox").prop("value",users[e].mail),$("#role").prop("value",users[e].role),$("#status").prop("value",users[e].status),$("#edit_dialog").prop("open",!0))}async function update(){var e=await fetch("/",{method:"GET"});document.open(),document.write(await e.text()),document.close()}async function edit_user(){await fetch("/users/"+selected_user(),{method:"PUT",headers:{"content-type":"application/json;charset=utf-8"},body:JSON.stringify({name:$("#name_textbox").prop("value"),birth:$("#date_textbox").prop("value"),mail:$("#email_textbox").prop("value"),role:$("#role").prop("value"),status:$("#status").prop("value")})});await update()}function open_info(){-1==selected_user()?alert("Can`t show info. Please, choose user"):window.location="/info/"+selected_user()}$(document).ready(()=>{get_user_list()});